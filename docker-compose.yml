version: "3.9"

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    image: fmpda-dev:latest
    container_name: fmpda-app
    working_dir: /app
    volumes:
      - ./:/app
      - composer-cache:/tmp/composer-cache
    environment:
      COMPOSER_CACHE_DIR: /tmp/composer-cache
    # Use the non-root user created in the Dockerfile
    user: "1000:1000"
    command: ["php", "-v"]
    tty: true

volumes:
  composer-cache:
    driver: local
